{"version":3,"sources":["main.js"],"names":["container","document","body","querySelector","navItems","querySelectorAll","navList","navItemOn","onStateClass","content","contentMask","contentScroll","contentSections","contentSectionHeights","tabbing","window","addEventListener","location","hash","setTimeout","forEach","call","item","i","push","offsetHeight","style","height","concat","event","target","tagName","url","href","stepNum","parseInt","substring","length","classList","contains","remove","val","nacItemHeight","pixels","top","removeAttribute","calcOnStatePosition","add","request","XMLHttpRequest","open","onload","data","JSON","parse","this","response","status","list","friends","map","e","sort","a","b","babyStep","lastName","displayMsg","section","msg","msgElm","createElement","innerHTML","appendChild","index","print","step","filter","obj","arr","firstName","composeMsg","send","toggleTabbingLayout","key","keyCode"],"mappings":"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","file":"../main.js","sourcesContent":["\"use strict\";\n\n(function () {\n  // cache some things\n  var container = document.body.querySelector('.l-container');\n  var navItems = document.body.querySelectorAll('.c-main-nav__list-item__link');\n  var navList = document.body.querySelector('.c-main-nav__list');\n  var navItemOn = document.body.querySelector('.c-main-nav__on');\n  var onStateClass = 'c-main-nav__list-item__link--on';\n  var content = document.body.querySelector('.c-content');\n  var contentMask = document.body.querySelector('.c-content__mask');\n  var contentScroll = document.body.querySelector('.c-content__scroll');\n  var contentSections = document.body.querySelectorAll('.c-content__scroll__section');\n  var defaultHash = 'baby-step-1';\n  var contentSectionHeights = [];\n  var tabbing = false; // default URL to baby step 1 on load/reload\n\n  var resetURL = function resetURL() {\n    location.hash = defaultHash;\n  }; // get the height for each baby step content section, push to an array and set baby step 1 box height. this will accommodate changes to content.\n\n\n  var getSectionHeights = function getSectionHeights() {\n    setTimeout(function () {\n      [].forEach.call(contentSections, function (item, i) {\n        contentSectionHeights.push(contentSections.item(i).offsetHeight);\n      });\n      contentMask.style.height = \"\".concat(contentSectionHeights[0], \"px\");\n    }, 200);\n  }; // clear nav on state upon each selection\n\n\n  var clearOnState = function clearOnState() {\n    [].forEach.call(navItems, function (item) {\n      if (item.classList.contains(onStateClass)) item.classList.remove(onStateClass);\n    });\n  }; // move the on state background elm\n\n\n  var calcOnStatePosition = function calcOnStatePosition(val) {\n    var i = val - 1;\n    var nacItemHeight = navItemOn.offsetHeight;\n    var stepNum = val;\n    var multiplier = stepNum - 1;\n    var pixels = \"\".concat(nacItemHeight * multiplier, \"px\"); // move the nav on state background and dynamically set the height of the masking div to accommodate content within each baby step\n\n    switch (stepNum) {\n      case 2:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      case 3:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      case 4:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      case 5:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      case 6:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      case 7:\n        navItemOn.style.top = pixels;\n        contentMask.style.height = \"\".concat(contentSectionHeights[i], \"px\");\n        break;\n\n      default:\n        navItemOn.removeAttribute('style');\n    }\n  }; // set the nav on state \n\n\n  var addOnState = function addOnState(event) {\n    var target = event.target;\n    if (target.tagName != 'A') return;\n    var url = target.href;\n    var stepNum = parseInt(url.substring(url.length - 1, url.length));\n    clearOnState();\n    calcOnStatePosition(stepNum);\n    target.classList.add(onStateClass);\n  }; // primary event listeners\n\n\n  window.addEventListener('load', resetURL);\n  window.addEventListener('DOMContentLoaded', getSectionHeights);\n  navList.addEventListener('click', addOnState, false); // dynamic data\n\n  var request = new XMLHttpRequest();\n  request.open('GET', 'baby-steps.json', true);\n\n  request.onload = function () {\n    var data = JSON.parse(this.response);\n\n    if (request.status >= 200 && request.status < 400) {\n      var list = [];\n      data.friends.map(function (e) {\n        list.push(e);\n      }); // sort friends list by baby step, then last name\n\n      list.sort(function (a, b) {\n        if (a.babyStep < b.babyStep) return -1;\n        if (a.babyStep > b.babyStep) return 1;\n        if (a.lastName > b.lastName) return 1;\n        if (a.lastName < b.lastName) return -1;\n      }); // compile friends message for each baby step section\n\n      var composeMsg = function composeMsg(item, index) {\n        var step = index + 1;\n        var section = item;\n        var print;\n        list.filter(function (obj) {\n          return obj.babyStep === step;\n        }).map(function (e, i, arr) {\n          if (i === 0) {\n            print = \"<a href=\\\"#\\\">\".concat(e.firstName, \" \").concat(e.lastName, \"</a>\");\n            if (arr.length === 1) print += ' is also in Baby Step ';\n            if (arr.length === 2) print += ' and ';\n            if (arr.length >= 3) print += ', ';\n          }\n\n          if (i === 1) {\n            print += \"<a href=\\\"#\\\">\".concat(e.firstName, \" \").concat(e.lastName, \"</a>\");\n            if (arr.length === 2) print += ' are also in Baby Step ';\n          }\n\n          if (i === 2) print += \", and \".concat(arr.length - 2, \" other friend\").concat(arr.length - 2 > 1 ? 's' : '', \" are also in Baby Step \");\n          if (i === arr.length - 1) print += step;\n        });\n        if (print) displayMsg(section, print);\n      }; // create the dom elements and insert the messages \n\n\n      var displayMsg = function displayMsg(section, msg) {\n        var msgElm = document.createElement('p');\n        msgElm.classList.add('c-content__scroll__section__friends');\n        msgElm.innerHTML = msg;\n        section.appendChild(msgElm);\n      }; // loop through section html elms and compose the friends messages for each baby step\n\n\n      [].forEach.call(contentSections, function (item, i) {\n        composeMsg(item, i);\n      });\n    }\n  };\n\n  request.send(); // accessibility features\n  // ******************************************************************\n  // expand layout when tabbing to prevent keyboard trap, return to default state when clicking resumes\n\n  var toggleTabbingLayout = function toggleTabbingLayout() {\n    if (tabbing) {\n      container.classList.add('tabbing');\n      content.classList.add('tabbing');\n      contentMask.classList.add('tabbing');\n      contentScroll.classList.add('tabbing');\n    } else {\n      container.classList.remove('tabbing');\n      content.classList.remove('tabbing');\n      contentMask.classList.remove('tabbing');\n      contentScroll.classList.remove('tabbing');\n    }\n  }; // detect navigation with keyboard\n\n\n  document.addEventListener('keyup', function (event) {\n    var key = event.key || event.keyCode;\n\n    if (key === 9 || key === 'Tab') {\n      tabbing = true;\n      toggleTabbingLayout();\n    }\n  }); // detect navigation with mouse\n\n  navList.addEventListener('mouseup', function () {\n    tabbing = false;\n    toggleTabbingLayout();\n  }, false);\n})();\n//# sourceMappingURL=maps/main.js.map\n"]}
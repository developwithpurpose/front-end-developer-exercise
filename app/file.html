<html>
	<head>
		<title>Baby Steps</title>
		
		<style>
			input.alert{
				border: 1px solid red;
			}
			
			p.alert{
				color: red;
			}
		</style>
	</head>
	<body>
		<h1>Baby Steps!</h1>
		<form action="#">
			<input type="text" id="txtName" placeholder="First and Last Name"/>
			<button id="go" type="submit">GO!</button>
		</form>
		
		<ul></ul>
		
		
		<script  src="https://code.jquery.com/jquery-2.2.4.min.js"  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="  crossorigin="anonymous"></script>
		<script>
		$(function() {  
			//attach the event to the form submit that way it catches both button clicks and the "enter" button
		  $('form').submit(function(event) {
			event.preventDefault();
			
			/*$.getJSON("baby-steps.json", function(obj){
				$.each(obj, function(key, value){
					$("<h2>"+key+"</h2>").insertAfter("h1");
					
					$.each(value, function(key, val){
						$("ul").append("<li> First Name: "+ val.firstName + " Last Name: " + val.firstName + " Baby Step: " + val.babyStep + "</li>");
					});
				});
			});*/
			
			//whenever possible, it's easier to use a variable name rather than the element string
			var nameField = $('#txtName').val();
			var results = true;
			$("p.alert").hide();
			
			
			if(nameField == "") {
			
				//$('#txtName').addClass('alert');
				$("<p class='alert'>Please enter a first and last name.</p>").insertAfter("form");
				return;
			
			}
				
			
			
			
			var FullName = nameField.split(" ");
			console.log(FullName.length);
			
			if(FullName.length < 2) {
				$("<p class='alert'>Please enter a first and last name.</p>").insertAfter("form");
				delete FullName;
				return;
			}
			
			if(FullName.length > 2) {
				$("<p class='alert'>Only two names, please.</p>").insertAfter("form");
				delete FullName;
				return;
			}
			
			
			   $.ajax({
			   url: 'baby-steps.json',
			   dataType: 'json',
			   success: function(data) {
				console.log(data.friends);
				try {
					for (var i=0; i<data.friends.length; ++i) {
						//console.log(data.friends[i]);
						//console.log(data.friends[i].firstName);
						
						//transform everthing to uppercase to be case insensitive
						if((data.friends[i].firstName.toUpperCase() == FullName[0].toUpperCase()) && (data.friends[i].lastName.toUpperCase())==FullName[1].toUpperCase()) {
							$("<h2>"+data.friends[i].firstName + " " + data.friends[i].lastName + " is on Baby Step " + data.friends[i].babyStep + "</h2>").insertAfter("h1");
						} else {
							results = false;
						}
					}
					
					if(results == false) {
						$("<p class='alert'>Sorry, no results were found with that name</p>").insertAfter("form");
						
					}

				} catch(e){
					console.log(e);
					
				}
				/*//the first loop gets the friends array
				  $.each(data, function(key, value){
					$("<h2>"+key+"</h2>").insertAfter("h1");
					
					//the second loop grabs the data inside the objects inside the friends array
					$.each(value, function(key, val){
						$("ul").append("<li> First Name: "+ val.firstName + " Last Name: " + val.lastName + " Baby Step: " + val.babyStep + "</li>");
					});
				});*/


			   },
			  statusCode: {
				 404: function() {
				   alert('Something broke! Quick! Hide!');
				 }
			   }
			});
		  });
		});
		</script>
	</body>
</html>
<html>
<head>
  <style type="text/css">
    @font-face {
      font-family:"Open Sans Light";
      src:url("/app/assets/fonts/OpenSansLight.woff2")
    }
    @font-face {
      font-family:"Open Sans Bold";
      src:url("/app/assets/fonts/OpenSansBold.woff2")
    }
    @font-face {
      font-family:"Source Sans Pro Light";
      src:url("/app/assets/fonts/SourceSansProLight.woff2")
    }
    @font-face {
      font-family:"Source Sans Pro Regular";
      src:url("/app/assets/fonts/SourceSansProRegular.woff2")
    }
    @font-face {
      font-family:"Source Sans Pro Semi-Bold";
      src:url("/app/assets/fonts/SourceSansProSemiBold.woff2")
    }
    html {
      background:#bbbfc2;
    }
    body {
      margin:auto;
      width:980px;
      height:800px;
      background:white;
    }
    ol {
      list-style-type:none;
      margin:0;
      padding:0;
      color:#9ba0a4;
      line-height:60px;
      font-size:18px;
      text-align: right;
      font-family:"Source Sans Pro Regular"
    }
    ol li {
      border-bottom:solid 1px white;
      cursor:pointer;
    }
    ol img {
      display:inline-block;
      width:30px;
      vertical-align: middle;
      padding-left:24px;
      padding-right:24px;
    }
    h2 {
      -webkit-margin-after:0;
      -webkit-margin-before:0;
      font-size:30px;
      line-height:20px;
      font-family:"Source Sans Pro Semi-Bold";
      color:#36abe1;
      padding-bottom:10px;
    }
    h3 {
      -webkit-margin-after:0;
      -webkit-margin-before:0;
      color:#5c6366;
      font-size:18px;
      line-height: 20px;
      font-family:"Source Sans Pro Light";
    }
    p {
      color:#65686f;
      font-size:13px;
      line-height: 18px;
      font-family: Helvetica;
    }

    #top-image-area {
      position:relative;
    }
    #header-image {
      width:100%;
    }
    #header-text-wrapper {
      position:absolute;
      top:0;
      right:0;
      margin-top:5%;
      margin-right:6%;
    }
    #header-text-wrapper span {
      color:white;
      display:block;
      text-align:right;
      line-height:48px;
    }
    #real-life {
      font-size:32px;
      font-family:"Open Sans Light"
    }
    #america-most {
      font-size:50px;
      max-width:445px;
      float:right;
      font-family:"Open Sans Bold"
    }
    #trusted-guy {
      font-size:50px;
      font-family:"Open Sans Bold"
    }
    #main-content {
      margin-top:60px;
    }
    #nav {
      position:relative;
      width:30%;
      background-color:#ebeced;
      padding-bottom:37px;
      display: inline-block;
      box-shadow:inset -7px 0 9px -7px rgba(0,0,0,0.4);/*I attempted to create an image so IE8 could have this but the image was too off color */
    }
    #baby-step-content {
      display: inline-block;
      vertical-align: top;
      width:69%;
      height:465px;
      overflow:hidden;
    }
    .baby-step-wrapper {
      margin-left:70px;
      margin-right:70px;
      height:100%;
    }
    .baby-step-image {
      display: inline-block;
    }
    .header-text-section {
      display:inline-block;
      vertical-align:top;
      padding-top:15px;
      padding-left:10px;
    }
    .nav-inset {
      position: absolute;
      right:0;
    }
    .active {
      background:white;
    }
    .active span {
      color:#36abe1;
    }
    .friend {
      color:#6fbee7;
    }
    .final-description-paragraph {
      -webkit-margin-after:0;
      margin-bottom:40px;
    }
  </style>
</head>
<body>
  <div id='#content-wrapper'>
    <div id="top-image-area">
      <img id="header-image" src="/app/assets/images/header.jpg" />
      <div id='header-text-wrapper'>
        <span id='real-life'>Real Life, Love and Money with</span>
        <span id='america-most'>AMERICA'S MOST TRUSTED GUY</span>
      </div>
    </div>
    <div id='main-content'>
      <div id='nav'>
        <ol>
          <li class="active">
            <span>Baby Step 1</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs1_blue.png">
          </li>
          <li>
            <span>Baby Step 2</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs2.png"/>
          </li>
          <li>
            <span>Baby Step 3</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs3.png"/>
          </li>
          <li>
            <span>Baby Step 4</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs4.png"/>
          </li>
          <li>
            <span>Baby Step 5</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs5.png"/>
          </li>
          <li>
            <span>Baby Step 6</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs6.png"/>
          </li>
          <li>
            <span>Baby Step 7</span>
            <img src="/app/assets/images/icons/individual/icons_small_bs7.png"/>
          </li>
        </ol>
      </div>
      <div id="baby-step-content">
        <div class='baby-step-wrapper' id="baby-step-1">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs1_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 1</h2>
              <h3>$1,000 Emergency Fund</h3>
            </div>
          </div>
          <p>An emergency fund is for those unexpected events in life that you can’t plan for: the loss of a job, an unexpected pregnancy, a faulty car transmission, and the list goes on and on. It’s not a matter of if these events will happen; it’s simply a matter of when they will happen.</p>
          <p class='final-description-paragraph'>This beginning emergency fund will keep life’s little Murphies from turning into new debt while you work off the old debt. If a real emergency happens, you can handle it with your emergency fund. No more borrowing. It’s time to break the cycle of debt!</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-2">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs2_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 2</h2>
              <h3>Pay off all debt using the Debt Snowball</h3>
            </div>
          </div>
          <p>List your debts, excluding the house, in order. The smallest balance should be your number one priority. Don’t worry about interest rates unless two debts have similar payoffs. If that’s the case, then list the higher interest rate debt first.</p>
          <p class='final-description-paragraph'>The point of the debt snowball is simply this: You need some quick wins in order to stay pumped up about getting out of debt! Paying off debt is not always about math. It’s about motivation. Personal finance is 20% head knowledge and 80% behavior. When you start knocking off the easier debts, you will see results and you will stay motivated to dump your debt.</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-3">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs3_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 3</h2>
              <h3>3 to 6 months of exepenses in savings</h3>
            </div>
          </div>
          <p>Once you complete the first two baby steps, you will have built serious momentum. But don’t start throwing all your “extra” money into investments quite yet. It’s time to build your full emergency fund. Ask yourself, “What would it take for me to live for three to six months if I lost my income?” Your answer to that question is how much you should save.</p>
          <p class='final-description-paragraph'>Use this money for emergencies only: incidents that would have a major impact on you and your family. Keep these savings in a money market account. Remember, this stash of money is not an investment; it is insurance you’re paying to yourself, a buffer between you and life.</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-4">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs4_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 4</h2>
              <h3>Invest 15% of household income for retirement</h3>
            </div>
          </div>
          <p>When you reach this step, you’ll have no payments—except the house—and a fully funded emergency fund. Now it’s time to get serious about building wealth.</p>
          <p class='final-description-paragraph'>Dave suggests investing 15% of your household income into Roth IRAs and pre-tax retirement plans. Don’t invest more than that because the extra money will help you complete the next two steps: college savings and paying off your home early.</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-5">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs5_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 5</h2>
              <h3>College funding for children</h3>
            </div>
          </div>
          <p>By this point, you should have already started Baby Step 4—investing 15% of your income—before saving for college. Whether you are saving for you or your child to go to college, you need to start now.</p>
          <p class='final-description-paragraph'>In order to have enough money saved for college, you need to have a goal. Determine how much per month you should be saving at 12% interest in order to have enough for college. If you save at 12% and inflation is at 4%, then you are moving ahead of inflation at a net of 8% per year!</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-6">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs6_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 6</h2>
              <h3>Pay off your house early</h3>
            </div>
          </div>
          <p>Now it’s time to begin chunking all of your extra money toward the mortgage. You are getting closer to realizing the dream of a life with no house payments.</p>
          <p class='final-description-paragraph'>As you attack this last debt, you will gain momentum much like you did back in the second step of the debt snowball. Remember, having absolutely no payments is totally within your reach!</p>
        </div>

        <div class='baby-step-wrapper' id="baby-step-7">
          <div class="baby-step-header">
            <img class='baby-step-image' src="/app/assets/images/icons/individual/icons_large_bs7_blue.png"/>
            <div class='header-text-section'>
              <h2>Baby Step 7</h2>
              <h3>Build wealth and give!</h3>
            </div>
          </div>
          <p>It’s time to build wealth and give like never before. Leave an inheritance for future generations, and bless others now with your excess. It's really the only way to live!</p>
          <p class='final-description-paragraph'>Golda Meir says, “You can’t shake hands with a clenched fist.” Vow to never hold your money so tightly that you never give any away. Hoarding money is not the way to wealth. Save for yourself, save for your family’s future, and be gracious enough to bless others. You can do all three at the same time.</p>
        </div>

      </div>
    </div>
  </div>
  <script type="text/javascript">
  (function () {
    var navListElement = document.querySelectorAll("li")
    for (var i = 0; i < navListElement.length; i++) {//Iterating instead of a foreach because somewhere else in code (Was this a module) Array.prototype could be altered.
      //Required to wrap like this in order for memory to be correctly copied for i
      navListElement[i].onclick = (function (index, elem) {
        return function () {
          selectStep(index, elem);
        };
      })(i, navListElement[i]);
    }

    function selectStep(babyStep, elem) {
      //First lets kick off the animation
      animateToStep(document.getElementById('baby-step-1').style.marginTop, babyStep * 465 * -1, 0, true)
      //Then update the LI's to where they need to be.
      var activeLi = document.getElementsByClassName("active")[0];
      activeLi.className = "";
      activeLi.children[1].src = activeLi.children[1].src.replace("_blue.png", ".png");
      elem.className = "active";
      elem.children[1].src = elem.children[1].src.replace(".png", "_blue.png");
    }

    /**
      So the idea behind this is that it takes in where the margin is currently for baby step 1 and where it needs to be
      currentMargin is where the baby-step-1 div's marginTop is currently
      desiredMargin is where it needs to be
      direction is used to tell us where it needs to be going, always pass in 0 when calling but the function calls itself and sets the parameter accordingly. The function will internally use 0 for going down and 1 for going up
      firstCheck should be set to true when calling and simply lets the function know that this is the first time it is running.
    */
    function animateToStep(currentMargin, desiredMargin, direction, firstCheck) {
      //Check to see if we are near where we are supposed to be and if so then just set the div to the desired margin.
      if (!direction && currentMargin - 5 < desiredMargin) {
        document.getElementById('baby-step-1').style.marginTop = desiredMargin + "px";
        return;
      } else if (direction && currentMargin + 5 > desiredMargin) {
        document.getElementById('baby-step-1').style.marginTop = desiredMargin + "px";
        return;
      }
      //Convert the currentMargin to a number we can work with if it was handed in as something like 10px. I know, bad to convert number to string but it is JS.
      if (currentMargin && typeof(currentMargin) == "string") {
        currentMargin = parseInt(currentMargin.replace("px", ""))
      }
      //If this is the first run then let us decide the direction we need to go. 0 is a given because the function should always be called with 0
      if (firstCheck) {
        if (currentMargin < desiredMargin) {
          direction = 1;
        }
      }
      //Decide the offset based on our direction
      var offset = -5;
      if (direction) {
        offset = 5;
      }
      //apply and update margins and recall
      currentMargin += offset;
      document.getElementById('baby-step-1').style.marginTop = currentMargin + "px";
      setTimeout(function () {
        animateToStep(currentMargin, desiredMargin, direction)
      }, 1);
    }

    //We dont want this blocking window load
    setTimeout(loadSocialInfo);
    function loadSocialInfo() {
      var xhrObj = new XMLHttpRequest();
      xhrObj.open('GET', "/app/assets/javascripts/baby-steps.json");
      xhrObj.onload = function () {
        if (xhrObj.status === 200) {
          var response = JSON.parse(xhrObj.responseText);
          if (response.friends) {
            //Create dictionary with arrays to add friends to base on baby steps.
            var friendDictionary = {};
            for (var i = 1; i <= 7; i++) {
              friendDictionary[i] = [];
            }
            for (var i = 0; i < response.friends.length; i++) {
              friendDictionary[response.friends[i].babyStep].push(response.friends[i]);//Push friend into new array.
            }
            for (var i = 1; i <= 7; i++) {
              if (friendDictionary[i].length > 0) {
                friendDictionary[i] = alphabetizeFriends(friendDictionary[i]);
              }
            }
            renderFriends(friendDictionary);
          }
        }
      }
      xhrObj.send();
    }
    //As according to the ReadMe it seems friends should be alphabetized by last name.
    //This will take in the array of friends and return an array of sorted friends.
    //This method will be using merge sort
    function alphabetizeFriends(friendsArray) {
      if (friendsArray.length === 1) {
        return friendsArray;
      }
      var left = [], right = [];
      var middle = Math.floor(friendsArray.length / 2);
      for (var i = 0; i < middle; i++) {
        left.push(friendsArray[i]);
      }
      for (var i = middle; i < friendsArray.length; i++) {
        right.push(friendsArray[i]);
      }
      left = alphabetizeFriends(left);
      right = alphabetizeFriends(right);
      return alphabeticalMerge(left, right);
    }
    //The actual merge, this should not be called directly from outside of alphabetizeFriends
    function alphabeticalMerge(left, right) {
      var returnValue = [];
      var leftIterator = 0;
      var rightIterator = 0;
      while (leftIterator < left.length && rightIterator < right.length) {
        if (left[leftIterator].lastName[0] <= right[rightIterator].lastName[0]) {
          returnValue.push(left[leftIterator]);
          leftIterator++;
        } else {
          returnValue.push(right[rightIterator]);
          rightIterator++;
        }
      }
      if (leftIterator < left.length) {
        while (leftIterator < left.length) {
          returnValue.push(left[leftIterator]);
          leftIterator++;
        }
      } else if (rightIterator < right.length) {
        while(rightIterator < right.length) {
          returnValue.push(right[rightIterator]);
          rightIterator++;
        }
      }
      return returnValue;
    }
    //Called via loadSocialInfo and it expects there to be a dictionary with arrays as values for the different baby step numbers as keys.
    function renderFriends(friendDictionary) {
      //Iterate through baby steps
      for (var i = 1; i <= 7; i++) {
        var friends = friendDictionary[i];
        var textToAdd = null;
        if (friends.length === 1) {
          //paragraph.appendChild(friendSpans[0]);
          textToAdd = "<span class='friend'>" + friends[0].firstName + " " + friends[0].lastName + "</span> is also in Baby Step " + i;
        } else if (friends.length === 2) {
          var tempText = "";
          for (var j = 0; j < 2; j++) {
            tempText += "<span class='friend'>" + friends[j].firstName + " " + friends[j].lastName + "</span> and ";
          }
          //Remove trailing and
          textToAdd = tempText.substring(0, tempText.length -4) + " are also in Baby Step " + i;
        } else if (friends.length > 2) {
          var tempText = "";
          for (var j = 0; j < 2; j++) {
            tempText += "<span class='friend'>" + friends[j].firstName + " " + friends[j].lastName + "</span>, ";
          }
          tempText += " and " + (friends.length - 2) + " other ";
          if (friends.length === 3) {
            tempText += "friend";
          } else {
            tempText += "friends";
          }
          textToAdd = tempText + " are also in Baby Step " + i;
        }
        //Check for null empty string etc.
        if (textToAdd) {
          var babyStep = document.getElementById("baby-step-" + i);
          babyStep.innerHTML += "<p style='webkit-margin-before:0;'>" + textToAdd + "</p>";
        }
      }
    }
  })();
  </script>
</body>
</html>
